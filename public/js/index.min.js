window.iflicks=function(a){"use strict";function b(a,c){for(c(a),a=a.firstChild;a;)b(a,c),a=a.nextSibling}function c(a,b,d,e){if("string"==typeof a&&(a=document.getElementById(a)),null!==a&&(a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent&&a.attachEvent("on"+b,e),d)){var f=a.type||"button";c(a,b,!1,function(){ga("send","event",f,b,"nav-buttons")})}}function d(a,b){var c={message:a,location:b};window.fetch("/error",{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)})["catch"](function(a){console.log(a)})}function e(a,b,c){var f,g,h,i,j,k,l,m=9e13,n={};for(g=c,void 0===c&&(c=10),"object"==typeof a&&void 0!==a.message&&(a=a.message),void 0!==a&&void 0!==window.console&&window.console.log((new Date).toUTCString()+" :: "+b+" :: "+a),void 0!==a&&0===a.indexOf("<")&&a.length>90&&(a="Unexpected error from server."),a&&(c=Date.now()+1e3*c,n.message=a,n.timeout=c,S.push(n)),h=document.createDocumentFragment(),S.forEach(function(a,b){a.timeout<=Date.now()?S.splice(b,1):(k=document.createTextNode(a.message),l=document.createElement("br"),h.appendChild(k),h.appendChild(l),a.timeout<m&&(m=a.timeout))}),j=document.getElementsByClassName("message"),f=0;f<j.length;f++){for(i=j.item(f);i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(h.cloneNode(!0))}9e13>m&&(c=m-Date.now(),setTimeout(function(){e()},c)),void 0!==a&&g%2===0&&d(a,b)}function f(a){return(document.cookie.match("(^|; )"+a+"=([^;]*)")||0)[2]}function g(a,b,c){var d,e;c?(e=new Date,e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()):d="",document.cookie=a+"="+b+d+"; path=/"}function h(a){a.classList.remove("hide")}function i(a){a.classList.add("hide")}function j(a,c){c=c||"200px";var d=document.getElementById(a);"0px"===d.style.height||""===d.style.height?(d.style.height=c,d.style.opacity=1,b(d,function(a){a.style&&(a.style.opacity=1)})):(d.style.height="0px",d.style.opacity=0,b(d,function(a){a.style&&(a.style.opacity=0)}))}function k(a,b){if(!(Object.getOwnPropertyNames(Q).length<2)){var c={};c[a]=b,window.fetch("/option",{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)})["catch"](function(a){e(a,"setOption",6)})}}function l(a,b){P++,void 0!==Q.id&&P%10===0&&(b>a.fileDetail.duration-5&&(b=0),window.fetch("/timeupdate/"+a.id+"/"+b,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}})["catch"](function(a){e(a,"timeUpdate",6)}))}function m(a,b){var c,d,e,f={};if(e=a/b,c=Math.max(document.documentElement.clientWidth||0),d=Math.max(document.documentElement.clientHeight||0),f.viewportWidth=c,f.viewportHeight=d,d>c&&400>c)f.videoWidth=c,f.videoHeight=f.videoWidth/e,f.src="small";else if(d>c&&c>=400&&500>c)f.videoWidth=400,f.videoHeight=f.videoWidth/e,f.src="small";else if(d>c&&c>=500&&800>c)f.videoWidth=500,f.videoHeight=f.videoWidth/e,f.src="medium";else if(d>c&&c>=800)f.videoWidth=880,f.videoHeight=f.videoWidth/e,f.src="big";else if(c>=d&&400>c)f.videoWidth=c,f.videoHeight=f.videoWidth/e,f.src="small";else if(c>=d&&c>=400&&500>c)f.videoWidth=400,f.videoHeight=f.videoWidth/e,f.src="small";else if(c>=d&&c>=500&&900>c)f.videoWidth=500,f.videoHeight=f.videoWidth/e,f.src="medium";else{if(!(c>=d&&c>=900))throw new Error("Unrecognised size");f.videoWidth=880,f.videoHeight=f.videoWidth/e,f.src="big"}return f}function n(){var a,d=document.getElementById("videoFile"),f=document.getElementById("uploadContainer"),g=document.getElementById("uploadProgress"),h=[],i=new window.FormData;for(i.append(d.name,d.files[0]),b(f,function(a){a.className&&a.className.indexOf("uploadContainer")>-1&&h.push(a)}),a=0;a<h.length;a++)h[a].name&&"checkbox"===h[a].type?i.append(h[a].name,h[a].checked):h[a].name&&i.append(h[a].name,h[a].value);g.classList.remove("hide"),g.max=1;var j=new XMLHttpRequest;c(j.upload,"progress",!1,function(a){g.value=a.loaded/a.total}),c(j,"readystatechange",!1,function(a){4==j.readyState&&(202===j.status?(document.getElementById("uploadForm").reset(),e(j.responseText,"uploadFile.msg",5),g.classList.add("hide")):(e(j.responseText,"uploadFile.error",6),g.classList.add("hide")))}),j.open("PUT","/upload/aa",!0),j.send(i)}function o(a){function d(b){var c=b.target;"Edit"===c.value?(document.getElementById("videoName").contentEditable=!0,document.getElementById("videoName").classList.add("editable"),document.getElementById("videoDescription").contentEditable=!0,document.getElementById("videoDescription").classList.add("editable"),document.getElementById("videoTags").contentEditable=!0,document.getElementById("videoTags").classList.add("editable"),h(document.getElementById("videoTags")),document.getElementById("videoPublic").classList.add("editable"),h(document.getElementById("videoPublic")),document.getElementById("videoDirectLink").classList.add("editable"),h(document.getElementById("videoDirectLink")),c.value="Save"):(document.getElementById("videoName").contentEditable=!1,document.getElementById("videoName").classList.remove("editable"),document.getElementById("videoDescription").contentEditable=!1,document.getElementById("videoDescription").classList.remove("editable"),document.getElementById("videoTags").contentEditable=!1,document.getElementById("videoTags").classList.remove("editable"),i(document.getElementById("videoTags")),document.getElementById("videoPublic").classList.remove("editable"),i(document.getElementById("videoPublic")),document.getElementById("videoDirectLink").classList.remove("editable"),i(document.getElementById("videoDirectLink")),w={id:a,name:document.getElementById("videoName").textContent,description:document.getElementById("videoDescription").textContent,tags:document.getElementById("videoTags").textContent,"public":document.getElementById("videoPublicCheck").checked,directLink:document.getElementById("videoDirectLinkCheck").checked},c.value="Edit",window.fetch("/editvideo",{method:"POST",credentials:"include",body:JSON.stringify(w),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()}).then(function(a){"OK"!==a.All&&e(a.error,"showVideo.btnEditClick.save",10)})["catch"](function(a){console.log("Error"),e(a,"showVideo.btnEditClick.save.1",10)}))}function f(){var a=document.createElement("input");return a.type="button",a.value="Edit",c(a,"click",!0,d),a}function g(){var a=document.createElement("input");return a.type="button",a.value="Send",a.id="btnShowCopy",c(a,"click",!0,function(a){"Send"===a.target.value&&document.getElementById("copyFlickPanel").classList.remove("hide")}),a}function j(a){var c={};c.id=a.target.id.split("_")[1],b(a.target.parentNode,function(a){a.name&&"text"===a.type&&(c[a.name]=a.value)}),window.fetch("/copy",{method:"POST",credentials:"include",body:JSON.stringify(c),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()}).then(function(a){"OK"!==a.All?e(a.error,"showVideo.copyFlickClick",10):(e("Received at destination","showVideo.copyFlickClick",5),document.getElementById("copyFlickPanel").classList.add("hide"))})["catch"](function(a){console.log("Error"),e(a,"showVideo.copyFlickClick.1",10)})}function n(a){var b,d,e,f,g;return d=document.createElement("input"),d.type="button",d.value="Send",d.id="copyFlick_"+a,c(d,"click",!0,j),e=document.createElement("input"),e.type="text",e.name="destination",e.placeholder="Destination server",f=document.createElement("input"),f.type="text",f.name="username",f.placeholder="Destination username",g=document.createElement("input"),g.type="text",g.name="password",g.placeholder="Destination password",b=document.createElement("div"),b.className="hide",b.id="copyFlickPanel",b.appendChild(e),b.appendChild(f),b.appendChild(g),b.appendChild(d),b}function o(a,b){var d,f=document.createElement("div"),g=document.createElement("div");for(g.className="ratingContainer",f.className="rating",r=5;r>0;r--)d=document.createElement("i"),b>=r?d.className="fa fa-star":r>b&&b>r-1?d.className="fa fa-star-half-o ":d.className="fa fa-star-o",d.id="rating_"+r,f.appendChild(d);return g.appendChild(f),c(g,"click",!0,function(b){var c=b.target.id.split("_")[1];window.fetch("/rating/"+a+"/"+c,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()}).then(function(d){"OK"!==d.All&&e(d.error,"showVideo.rating.save",7);var f=b.target.parentNode.parentNode.parentNode;f.removeChild(b.target.parentNode.parentNode),f.appendChild(o(a,c))})["catch"](function(a){e(a,"timeUpdate",6)})}),g}function p(){s=N.fileDetail&&N.fileDetail.width?m(N.fileDetail.width,N.fileDetail.height):m(800,600),v.innerHTML='<video id="video" poster="/thumb/'+a+"/"+s.src+'" data-setup="{}"  class="video-js vjs-default-skin" ><source src="/video/'+a+"/"+s.src+".mp4?r="+(new Date).getTime()+'" type="video/mp4"></source><source src="/video/'+a+"/"+s.src+".webm?r="+(new Date).getTime()+'" type="video/webm"></source><source src="/video/'+a+"/"+s.src+".ogv?r="+(new Date).getTime()+'" type="video/ogg"></source></video><div ></div>',q={controls:!0,autoplay:!1,preload:"auto",width:s.videoWidth,height:s.videoHeight},L=videojs(document.getElementById("video"),q,function(){}),N.currentTime&&L.currentTime(N.currentTime),L.on("error",function(a){e(a.message,"showVideo.setVideoDetail.vjs.error",10)}),L.one("play",function(){window.fetch("/playVideo/"+a,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()})}),L.on("volumechange",function(a){Q.options.volume=a.target.volume,k("volume",a.target.volume)}),L.on("timeupdate",function(){l(N,L.currentTime())}),Q.options&&Q.options.volume&&L.volume(Q.options.volume),u=document.createElement("div"),u.id="videoInfo",t=document.createElement("div"),t.id="videoName",t.className="videoTextItem",t.title="Video name",t.textContent=N.name,u.appendChild(t),t=document.createElement("div"),t.id="videoDescription",t.className="videoTextItem",t.title="Video description",t.textContent=N.description,u.appendChild(t),t=document.createElement("div"),t.id="videoTags",t.className="videoTextItem",t.title="Video tags",t.textContent=N.tags,i(t),u.appendChild(t),x=document.createElement("div"),x.id="videoPublic",x.className="videoTextItem",x.textContent="Public",y=document.createElement("input"),y.id="videoPublicCheck",y.type="checkbox",y.name="public",y.checked=N.isPublic,i(x),x.appendChild(y),u.appendChild(x),z=document.createElement("div"),z.id="videoDirectLink",z.className="videoTextItem",z.textContent="Allow direct link",A=document.createElement("input"),A.id="videoDirectLinkCheck",A.type="checkbox",A.name="directLink",A.checked=N.isDirectLinkable,i(z),z.appendChild(A),u.appendChild(z),t=document.createElement("div"),t.id="videoRunCount",t.className="videoTextItem",t.textContent="Played "+N.playCount+" time"+(1===N.playCount?"":"s"),u.appendChild(t),void 0===Q.id||N.userId!==Q.id&&Q.isSysAdmin!==!0||(u.appendChild(f()),u.appendChild(g())),u.appendChild(o(a,N.rating)),u.appendChild(n(a)),v.appendChild(u)}var q,r,s,t,u,v,w,x,y,z,A;for(document.getElementById("videoList").classList.add("hide"),v=document.getElementById("videoContainer"),v.classList.remove("hide"),clearInterval(J),r=0;r<R.length;r++)if(R[r].id===a){N=R[r];break}N?p():window.fetch("/videodetail/"+a,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()}).then(function(a){a.error?e(a.error,"showVideo.fetchVideoDetail",10):(N=a,p())})["catch"](function(a){console.log("Error"),e(a.message,"showVideo.fetchVideoDetail1",10)})}function p(a){window.history.replaceState({method:"showVideo",vid:a},"Play video",window.location.href),o(a)}function q(a){var b,d,e,f,g,h,i,j;for(d=a.data,e=document.getElementById("videoList");e.firstChild;)e.removeChild(e.firstChild);if(void 0!==d){f=document.createDocumentFragment(),d.forEach(function(d,k){function l(){var b,c=window.history.state||{};b=d.name||"-",b=b.replace(" ","_"),c.method="listVideos",c.scrollTop=document.body.scrollTop,c.page=a.page,c.limit=a.limit,c.search=a.search,window.history.replaceState(c,"List video",""),window.history.pushState({method:"showVideo",vid:d.id},"Show video","/"+b+"/"+d.id),o(d.id)}var m,n,p,q,r,s,t;m=document.createElement("div");var v=document.createTextNode(" ");if(g=document.createElement("div"),q=document.createElement("i"),n=document.createElement("div"),p=document.createElement("img"),h=document.createElement("span"),r=document.createElement("div"),i=document.createTextNode(d.name),s=document.createElement("span"),s.innerHTML=d.description,j=document.createElement("i"),m.className="vidContainer",g.className="vidContent",q.className="vidLoadingThumb fa fa-spinner fa-pulse fa-5x",n.className="vidThumbContainer hide1",p.className="vidThumb",r.className="vidFooter",h.className="vidName",j.className="fa fa-trash-o vidDelete",p.src="/thumb/"+d.id+"/thumb",c(p,"error",!1,function(){p.src="/img/missing.png"}),c(p,"load",!1,function(){n.classList.remove("hide1"),n.parentNode.removeChild(n.parentNode.children[0])}),s.className="vidDescription",h.appendChild(i),g.appendChild(q),n.appendChild(p),g.appendChild(n),r.appendChild(h),g.appendChild(r),m.appendChild(v),m.appendChild(g),m.appendChild(s),(d.userId===Q.id||Q.isSysAdmin===!0)&&m.appendChild(j),f.appendChild(m),d.isEncoded===!0){var w;c(m,"mousedown",!0,function(a){w=void 0,t=setTimeout(function(){w=a.target,w.classList.add("hide1")},500)}),c(m,"mouseout",!1,function(){clearTimeout(t),w&&w.classList.remove("hide1")}),c(m,"mouseup",!0,function(a){clearTimeout(t),w&&w.classList.remove("hide1"),void 0===w&&0===a.button&&l()})}c(j,"mouseup",!0,function(a){for(clearTimeout(t),u(d.id),e.removeChild(m),b=0;b<R.length;b++)if(R[b].id===d.id){R.splice(b,1);break}a.stopPropagation()}),k%10===0&&(e.appendChild(f),f=document.createDocumentFragment())}),e.appendChild(f);var k,l,m;k=document.createElement("div"),l=document.createElement("span"),m=document.createElement("span"),l.textContent="Next",m.textContent="Previous",k.id="nextPrev",l.className="nextPrev",m.className="nextPrev",c(l,"click",!0,function(){a.page++,r(a.page,a.limit,a.search)}),c(m,"click",!0,function(){a.page--,r(a.page,a.limit,a.search)}),a.page>0&&k.appendChild(m),a.count>(a.page+1)*a.limit&&k.appendChild(l),e.appendChild(k)}}function r(a,b,c){var d,f,g,h,i;for(a=a||0,b=b||10,c=c||"-",M=0,N=void 0,g=document.getElementById("videoList"),g.classList.remove("hide"),document.getElementById("videoListUnencoded").classList.add("hide"),h=document.getElementById("videoContainer"),h.classList.add("hide");h.firstChild;)h.removeChild(h.firstChild);for(f=document.getElementById("video"),null!==f&&videojs(f).dispose(),i=document.getElementsByClassName("newVideoPopup"),d=0;d<i.length;d++)i[d].parentNode.removeChild(i[d]);clearInterval(J),R.length>0?g.children.length!==R.length&&q(R):window.fetch("/videolist/"+a+"/"+b+"/"+c,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()}).then(function(a){void 0!==a.error?e(a.error,"listUnencoded.fetchVideoList",6):Array.isArray(a.data)?(R=a,q(R)):e("Non array type returned.","listtVideos.fetchVideoList",6)})["catch"](function(a){e(a,"listtVideos.fetchVideoList1",10)})}function s(){void 0!==window.EventSource&&(K=new window.EventSource("/newvideo"),c(K,"newVideo",!1,function(){var b=document.createElement("div");M++,b.className="newVideoPopup",b.innerHTML="<p>There are "+M+" new videos</p>",c(b,"click",!0,function(){window.history.pushState({method:"listVideos"},"List video","/"),r(0,a.videoListPageLength)}),document.body.appendChild(b),setTimeout(function(){b.parentNode.removeChild(b)},6e3)}))}function t(a,b){function c(){window.fetch("/videolistunencoded/"+a+"/"+b,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return a.json()}).then(function(a){void 0!==a.error?e(a.error,"listUnencoded.getUnencoded",6):Array.isArray(a.data)?q(a):e("Non array type returned.","listUnencoded.getUnencoded",6)})["catch"](function(a){e(a,"listUnencoded.getUnencoded1",6)})}var d,f,g;for(N=void 0,f=document.getElementById("videoList"),f.classList.remove("hide"),document.getElementById("videoListUnencoded").classList.add("hide"),g=document.getElementById("videoContainer"),g.classList.add("hide");g.firstChild;)g.removeChild(g.firstChild);d=document.getElementById("video"),null!==d&&videojs(d).dispose(),c(),clearInterval(J),J=setInterval(c,5e3)}function u(a){window.fetch("/video/"+a,{credentials:"include",method:"DELETE"})["catch"](function(a){e(a,"deleteVideo.fetch",6)})}function v(a){var b,c,d=!0,f={};for(b=0;b<a.target.parentNode.childNodes.length;b++)c=a.target.parentNode.childNodes[b],"text"===c.type?(f[c.name]=c.value,c.value.length<2&&(d=!1,e(c.name+" is required.","addUserHandler",5)),"emailAddress"===c.name&&/\S+@\S+\.\S+/.test(c.value)===!1&&(d=!1,e("Email should be an email address.","addUserHandler",5))):"checkbox"===c.type&&(f[c.name]=c.checked);d&&window.fetch("/user",{credentials:"include",method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(f)}).then(function(a){return a.json()}).then(function(a){a.error?e(a.error,"addUserHandler.fetchUser",6):a.reply?(e(a.reply,"addUserHandler.fetchUser1",7),j("createAccountContainer"),document.getElementById("username").value=f.username):e("Unexpected response","addUserHandler.fetchUser2",10)})["catch"](function(a){e(a.message,"addUserHandler.fetchUser3",10)})}function w(){j("uploadContainer")}function x(){j("createAccountContainer")}function y(){"true"===f("cookieConsent")&&null!==document.getElementById("cookieBanner")&&(document.getElementById("cookieBanner").className="hide")}function z(){document.getElementById("cookieBanner").className="hide",g("cookieConsent","true",365)}function A(){document.getElementById("infoContainer").className="hide",g("closeInfoPanel","true",365)}function B(){Object.getOwnPropertyNames(Q).length>0&&(Q.options||(Q.options={}),Q.options.volume&&L&&L.volume(Q.options.volume),document.getElementById("loggedinContainer").style.display="inline-block",document.getElementById("loginContainer").style.display="none",document.getElementById("headerBarUserName").textContent="Hello "+Q.givenName,Q.gravatarUrl&&(document.getElementById("headerBarAvatar").src=Q.gravatarUrl),document.getElementById("message").textContent="",q(R),void 0===window.FormData&&(document.getElementById("showUploadContainer").style.display="none"),Q.isConfirmed!==!0&&(document.getElementById("showUploadContainer").style.display="none"))}function C(){window.fetch("/login",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:document.getElementById("username").value,password:document.getElementById("password").value})}).then(function(a){return a.json()}).then(function(a){a.error?e(a.error,"login.fetchLogin",7):(Q=a,B())})["catch"](function(a){e(a,"login.fetchLogin1",6)})}function D(){window.fetch("/login",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){return 200!==a.status?{}:a.json()}).then(function(a){Object.getOwnPropertyNames(a).length>0&&(Q=a,B())})["catch"](function(a){e(a,"loginCheck.fetchLogin",6)})}function E(){Q={},document.getElementById("loggedinContainer").style.display="none",document.getElementById("loginContainer").style.display="inline-block",document.getElementById("showUploadContainer").style.display="inline-block",document.getElementById("message").textContent="",document.getElementById("headerBarUserName").textContent="",window.fetch("/login",{method:"DELETE",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})["catch"](function(a){e(a,"logout.fetchLogin",6)})}function F(){var a,b,c,d,f=3422856,g=new Image;g.onload=function(){b=(new Date).getTime(),c=(b-a)/1e3,d=f/c/1024/1024,1>d&&(d=(1.8*d).toFixed(2),e("The internet speed between you and us is slow ("+d+" Mbps) so these videos may not play smoothly.","downloadSpeedTest",7))},a=(new Date).getTime(),g.src="/img/random.jpg?n="+a}function G(a){if(void 0===window.FormData){var b=document.createElement("div");b.style.position="fixed",b.style.top="0px",b.style.width="100%",b.style.backgroundColor="#FFFF99",b.innerText="Some features will not work in your browser version. i-flicks works in all modern browsers.  It doesn't work on old versions of Internet Explorer or very old mobile browsers.",document.getElementById("body").appendChild(b)}a()}function H(b){b&&b.preventDefault();var c=document.getElementById("search").value.trim();void 0!==c&&null!==c&&0!==c.length&&(window.history.pushState({method:"listVideos",search:c},"Search video","/"),r(0,a.videoListPageLength,c))}function I(){G(function(){c("submitUploadNewVideo","click",!0,n),c("submitLogin","click",!0,C),c("submitLogout","click",!0,E),c("submitSearch","click",!0,H),c("search","keydown",!1,function(a){a||(a=window.event),13==a.keyCode&&H()}),c("closeInfoPanel","click",!0,A),c("submitCookieAccept","click",!0,z),c("showUploadContainer","click",!0,w),c("showCreateAccount","click",!0,x),c("submitCreateAccount","click",!0,v),c("showVideoList","click",!0,function(){window.history.pushState({method:"listVideos"},"List video","/"),r(0,a.videoListPageLength)}),c("showUnencodedVideoList","click",!0,function(){window.history.pushState({method:"listUnencoded"},"List unencoded videos","/"),t(0,a.videoListPageLength)}),c(window,"popstate",!0,function(a){"showVideo"===a.state.method?o(a.state.vid):"listVideos"===a.state.method?(r(a.state.page,a.state.limit,a.state.search),void 0!==a.state.scrollTop&&a.state.scrollTop>0&&window.scroll(a.state.scrollTop,0)):"search"===a.state.method&&(r(a.state.page,a.state.limit,a.state.search),void 0!==a.state.scrollTop&&a.state.scrollTop>0&&window.scroll(a.state.scrollTop,0))}),c(window,"resize",!0,function(){var a,b,c;void 0!==N&&N.fileDetail&&N.fileDetail.width&&O!==window.orientation&&(O=window.orientation,a=m(N.fileDetail.width,N.fileDetail.height),b=L.currentTime(),c=L.paused(),L.dimensions(a.videoWidth,a.videoHeight),L.src([{type:"video/mp4",src:"/video/"+N.id+"/"+a.src+".mp4?r="+(new Date).getTime()},{type:"video/webm",src:"/video/"+N.id+"/"+a.src+".webm?r="+(new Date).getTime()}]),L.currentTime(b),c||L.play())}),D(),s(),r(0,a.videoListPageLength),F()}),y()}var J,K,L,M,N,O,P=0,Q={},R=[],S=[],T=new Image;a.videoListPageLength=a.videoListPageLength||10,T.src="/img/loading.gif",O=window.orientation,Q.options={};return I(),{showVideoOnLoad:p}}({});